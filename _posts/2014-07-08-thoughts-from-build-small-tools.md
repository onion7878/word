---

layout: post
title: 由一个工具想到的
date: 14-07-08 15:12:11
tags: [tools, product, code]
categories: [thought]

---

![Text]({{site.url}}/assets/blog_img/2014-07-08-thoughts-from-build-small-tools/monkey_business%21.jpg) 

## 内部工具

在现在公司里，因为产品性质的原因，我更多的是编写一些内部的工具，我并没有觉得这有什么不好的，反而算是一种锻炼吧，而且写内部用的工具有很多优点，总结下来：

 - 掌控感；只要实现工具的功能，基本上工具怎么做，是你说了算，而不是项目经理，用的人也只管能用就行，可以把工具的字体改为等宽的非村线字体，可以改变图标，这给了我很大的想象和发挥的空间，我想这种掌控的感觉也每个程序员或多或少想要的快感。

 - 对流程的把握；一个工具一般基本不可能是一个函数就可以解决问题的，一般情况下正是因为某件事情的流程对人工来说过于复杂，并且重复。而一个工具就是为解决这类问题而存在的。这种情况下，一个工具往往很多函数构成的，这就需要你对流程的了解。

 - 微型的产品；都说产品是用来解决用户问题的，工具面对的用户即是内部人员，解决的也是他们的问题。在桌面程序里，无论从技术和经验来说，作为一个刚入行的程序员来说，一般很难一开始就把控整个产品。但内部的工具无形给我这个机会。你可能不用把工具做的有多么漂亮，但是至少简洁，不用有多好的用户体验，但是至少在做的时候会往这方面思考。

从进入现在的项目组，到现在，我写的工具也有 `20` 个左右了，时间长一点的，现在看来不仅样子丑，里面的代码，我也不想承认是我写的 (;ﾟдﾟ)

## 一个工具想到的

最近在写一个加密解密的工具，本来在代码里应该就是一行函数就可以解决的，因为是给测试用，所以至少是要有个界面吧。


### [GUI][^0] (Graphical User Interface)

因为时间相对宽松的情况下，我一开始的想法不是用几个 `Edit` 加几个 `Button` 就解决问题，而是想做成类似 `WinHex` 那样的东西，左边以十六进制显示加密的文件，右边显示解密后的具体文本，两边都是可以编辑的，实现所谓的所见即所得 `What You See Is What You Get` ；同时用邮件菜单实现选择加密解密方式，及具体的 `KEY` 

大概用了大半天的时间，我发现这个东西，越写越复杂，比自己当初预估的时间多出了许多，而且都还没有写完，我意识到这个已经不是当初想做的那个工具了；停下来，仔细想，测试他们真的需要带十六机制的界面吗？这些对他们有意义吗？他们真的需要所见即所得吗？

### [CLI][^1] (command-line interface)

想清楚后，我开始走向了另外一个极端，尝试把程序做成控制台的，使用命令行来操作，我当时想的这下总简单了吧，而且做成控制台以后我自己还可以集成在其他工具里。

我开始设计控制台的参数，但是发现事情远没有我想象的那么简单，光是参数的数量对于测试人员来说就很多了，你需要输入 `待解密的文件路径` `解密的方式` `两组KEY` `输出的文件路径` (使用这些参数都是便于以后扩展)；当我把这些设计好的时候，发现这对于测试来说，是不是过于复杂了一些，或者说，如果是我自己用的话，我也不想每次解密一个文件需要输入如此多的参数，我就需要的是，把这个文件已某种方式解开。

### Build-in

我开始整合这些参数，并尝试用一种更好的方式结合它们。

 - `待解密的文件路径`，其实在Windows上，当你要对一个文件进行某种操作时，鼠标指上去的时候其实已经确定了这个文件。

 - `解密的方式` 和 `两组KEY` 我发现在使用当中，其实这两个参数，主要的作用是来增加程序（或者说是函数）的扩张性，仔细想下在内部用的工具，程序一旦发布，这些都是定死的，这样来说，这个参数也就不成立了。

 - `输出的文件路径` 其实也和上面的两个参数作用一个性质，增加扩展性；如果我给的默认输出地址就是用户最想要的路径地址呢。

上面所说的，都可以集成在邮件菜单中解决，`解密的方式` 和 `两组KEY` 使用指定的方式和KEY，如果以后有扩展，再一个一个加；`输出的文件路径` 就是和 `待解密的文件路径` 一个目录，修改文件后缀就行。

而在Windows上的右键菜单甚至都不用程序来实现，用注册表文件就可以[实现](http://somemightsay.me/code/2014/07/08/add-cascading-menus-in-windows.html)。

## Finally

我并没有觉得这样一个特例能够在很多环境下使用，可能其中一个条件没有满足就不能做成这个样子，比如万一输入的文件是需要多个，并且带顺序的。那右键菜单根本实现不了；如果是一个可能持续很多时间的工具，那么可能就需要有进度条。仅仅是记录一下我当时是怎么想的，这个渐进的过程我觉得是最重要的。

[^0]: https://en.wikipedia.org/wiki/Graphical_user_interface
[^1]: https://en.wikipedia.org/wiki/Command-line_interface