---

layout: post
date: 2012-10-19 02:11
title: The first month study delphi
tags: [delphi, code, study, internship]
categories: [code]

---

![Text]({{site.url}}/assets/blog_img/2012-10-19-the-first-delphi-study/cropped-delphi.jpg)

9月13号开始的实习，今天10月18号了，除开国庆8天的长假，在公司实习也将近要一个月了，只到今天才有点自己的空闲时间，想写点东西，怕时间久了，忘了。

<!-- more -->

## 第一次接触

虽然在实习之前就知道，公司基本用的是Delphi，但还是在进公司之后才接触上Delphi 的，来公司的第一天就抱着一本Delphi的参考书看，基本的语法完全不知道，跟我一起实习的哥们，之前早有准备，所以语法什么的基本都知道，第一天的下午就发觉压力不小，因为公司实习每个月要考核一次，没有过就走人。就这样，第一次接触了Delphi。

## 一些奇怪的语法
用 `Begin` 和 `End` 来代替 `{}` 括号，这样以来，看代码远没有用 `{}` 来的舒服些，特别是嵌套多了，就对不上哪些 `End` 是对应哪些 `Begin` 的了。后来知道有一款类似VS里面的[Visual Assist X](http://www.wholetomato.com/)的软件，国人开发的 [CnPack](http://www.cnpack.org/index.php?lang=zh-cn)，安装IDE里面代码的结构就好看多了。

安装CnPack前后：

![Text]({{site.url}}/assets/blog_img/2012-10-19-the-first-delphi-study/delphi_short.png)

1. 赋值语句由 `=` 变成了， `:=` 。而 `=` 则表示是相等的意思，两边是布尔值。最开始写代码的时候哈有点适应不过来。

2. `if…else` 语句，在 `else` 前面的代码，不能用分号结尾，好奇怪的规定，开始没有仔细看书的时候还不知道有这样的一个规定，也折腾了一下才了解到的。

3. 函数的返回值，在函数里面设置的时候，不回跳出当前的函数，而是继续向下执行，直到函数的最后一个 `End` 或者期间有 `Exit` 退出。 

来个例子

```pascal
function HKEYtoString(rootKey: HKEY): string;
begin
  Result := '';
  if rootKey = HKEY_CLASSES_ROOT then
    Result := 'HKEY_CLASSES_ROOT'
  else if rootKey = HKEY_CURRENT_USER then
    Result := 'HKEY_CURRENT_USER'
  else if rootKey = HKEY_LOCAL_MACHINE then
    Result := 'HKEY_LOCAL_MACHINE'
  else if rootKey = HKEY_USERS then
    Result := 'HKEY_USERS'
  else if rootKey = HKEY_CURRENT_CONFIG then
    Result := 'HKEY_CURRENT_CONFIG'
  else
    Result := '';
end;
```

其他的暂时还没有发现特别让我纠结的语法，和之间接触过的语言都大同小异。

## 第一个程序

公司实习每个月有一次考核，第一个月我的任务是做一个类似Windows自带注册表编辑器的一个东西：	

![Text]({{site.url}}/assets/blog_img/2012-10-19-the-first-delphi-study/first_delphi_pro.png)

开始的时候也不知道从哪里下手，虽说知道有注册表这个东西，但是真是没有研究过，也不知道它是用来干什么的，里面存储的数据又哪用。但也有硬着头皮做下去。前几天基本都是在熟悉语法和IDE，开始用Delphi 2009时，无比怀念VS，甚至还Google了下能用VS写Delphi的代码么。各种快捷键要重新熟悉过。

第一个星期的节奏大概是这样子的：

`每天7点半起来` –> `赶109公交` –> `两站到公司附近` –> `711买早饭吃` –> `到公司` –> `开始写代码` –> `11:30吃午饭` –> `回公司继续写代码` –> `下班晚饭后坐公交回租的地方` –> `扒在床上休息到8点` –> `继续爬起来写代码–`> `11点过后洗簌躺下`

就这样，渐渐熟悉了语言和开发环境，也熟悉了上下班的时间，熟悉公司的环境。最开始的几天，因为强度对比学校里面逍遥自在的生活提高了很多，眼睛有点受不了，每天下班过后，都有点睁不开眼睛，不是因为困，而是眼睛太累，太干涩了。后来泓子给买了瓶眼药水才有点缓解。

在写代码的过程中，每天也遇到很多问题，开始了解做注册表编辑器大概要用到哪些控件，怎样获取注册表的数据之类的。虽说遇到很多问题，但学的也多。因为这是我的第一份实习，我想争取把它做好，每天累也就累点了，谁叫在学校里面耍多了呢。

实习的第三个星期是中秋和国庆，放了8天，在放假之前，心中暗想一定要在这8天里做出点东西来，想着家里的环境怎么也比在租金只有250RMB的7楼没电梯，开始还不能洗澡的地方强哇。可是回到家，事就更多了，先是谁谁谁结婚，吃了高价饭，然后是各种开车搭他们，放假的第二天，虫虫就来，这算是第一次见能讲话的虫虫了，本来想着晚上可以做，但也做不成了。虽说有三个卧室，但都占满了，回了家还只有睡沙发。每天也不怎么休息好。然后这8天的假就这样过去了，也没有到哪里去玩，也没有做成事情，就稀里糊涂的过过去了。期间每天晚上在沙发上准备入睡是还伴随着强烈的自责感：因为一天都没有碰过代码。

## 一些压力

![Text]({{site.url}}/assets/blog_img/2012-10-19-the-first-delphi-study/bicycle.jpg)

国庆回来的第一个星期，突然感觉压力很大，跟我一起实习的哥们在国庆前就把他做的程序交了，也验收了。但是我这才做出的点点东西了，很多都还没有搞清楚。想着每个月的考核，自己就开始乱想，想着如果第一月考核就不过，是不是很丢脸，刚刚拿到实习的时候，还兴奋的到处打电话告诉他们这个好消息，现在连第一月的考核都危险了。每天除了在编写代码的时候，都会有这个想法在脑子里转。感觉每天都过的飞快，想要是国庆不回家去就好了，呆在租的地方，先把程序写出来再说，现在看来就是这写想法给我了很大的压力，还有对这个程序整体完全没有把握，心中没有一个进度的感觉，就算做出来一个功能也不知道整个程序完成了几分之几。心里就发慌。

11号的时候，带我们RD实习生的人在GTalk上问我是不是上个月13号来的，说第一个程序的考核期就是一个月，所有功能都应该在考核期内完成。当时就翻了下日历，当天11号是周四，庆幸13是周六，有两天时间可以再做做，15号周一再交。不过心里还是没有谱，所以当天晚上就写了个通宵，8点回去写的，写到第二天早上7点半，然后洗了个澡就去公司了。就这样时间也过的很快。而且更悲剧的是，发现通宵写的代码在思路上就有问题，没法达到要求。只有推翻重新再写。

我没有怪自己为什么当天没有先把思路想好再写，有些东西你不试试怎么知道那条路就走不通呢，也庆幸自己一个通宵就找到了正确的方法，可以顺利的往下做。一旦代码写起来，压力什么根本不知道是个什么。

第二周，HR找我谈了下，像日常的那样了解工作状况，进度什么的，给他说了，他给我缓解了下压力吧。

期间压力最大的时候，我问自己，是不是想以后都做程序员呢，答案是肯定的，我感觉我就是喜欢他，代码写的顺的时候有快感，卡壳了，解决问题有快感。看着自己写的程序在跑的时候也有快感。所以就努力好好干吧。就想王在饭否上给我说的： 	

> **Try ur Fucking Best!** 

## 最后

现在程序基本成型了，除了一个编辑二进制的窗口不知到怎么做以外，剩下的就是找找Bug，优化一下了。

在编写这个程序期间遇到的很多问题和我觉得可以拿来说的，等过几天有时间了再写出来。

必须要去睡了，现在又1点过了。